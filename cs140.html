<!DOCTYPE html>
<head>
    <title>COSC 140 Grades</title>
    <link rel="stylesheet" href="styles.css"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>

<script type="text/JavaScript">
    $(document).ready(function() {
        var tid = setInterval(updateGrades, 1000);

        function updateGrades() {
            var lab_grades = [];

            for (var i = 0; i <= 8; i++) {
                var value = $('#Lab' + i).val();
                if (typeof value === 'undefined')
                    console.log(i);

                if (value != '')
                    lab_grades.push(value);
            }

            var lab_total = 0;
            var lab_average = 0;
            var num_labs = lab_grades.length;
            for (var i = 0; i < num_labs; i++) {
                lab_total += parseInt(lab_grades[i]);
            }
            lab_average = lab_total / lab_grades.length;

            if (num_labs > 0)
                $('#lab').text('Lab Average: ' + lab_average + ' (' + (lab_total / num_labs) + '%)');

            var attendance_grades = [];

            for (var i = 1; i <= 15; i++) {
                var value = $('#P' + i).val();

                if (value != '')
                    attendance_grades.push(value);
            }

            var attendance_total = 0;
            var attendance_average = 0;
            var num_attendances = attendance_grades.length;
            for (var i = 0; i < num_attendances; i++) {
                attendance_total += parseInt(attendance_grades[i]);
            }
            attendance_average = attendance_total / attendance_grades.length;

            if (num_attendances > 0)
                $('#attendance').text('Attendance Average: ' + attendance_average + ' (' + ((attendance_total * 100) / (5 * num_attendances)) + '%)');


            
            var exam_grades = [];
            var midterm = $('#midterm').val();
            var m_grade = parseInt(midterm);
            if (midterm != '') {
                exam_grades.push(m_grade);
               }

            var finalexam = $('#final').val();
            var f_grade = parseInt(finalexam);
            if (finalexam != '')
                exam_grades.push(parseInt(f_grade));

            if (f_grade > m_grade)
                exam_grades[0] = f_grade;

            if (isNaN(f_grade) && !isNaN(m_grade))
                exam_grades[1] = exam_grades[0];

            var exam_total = 0;
            var exam_average = 0;
            var num_exams = exam_grades.length;
            for (var i = 0; i < num_exams; i++) {
                exam_total += parseInt(exam_grades[i]);
            }

            exam_average = exam_total / exam_grades.length;

            if (num_exams > 0)
                $('#exam').text('Exam Average: ' + exam_average + ' (' + ((exam_total) / (num_exams)) + ')%');


            if (num_exams > 1 && num_attendances > 0 && lab_grades > 0) {
                var total = exam_grades[0] * .25 + exam_grades[1] * .25 + attendance_average * .05 + lab_average * .45;

                $('#total').text('Total Average: ' + total + ' (' + (total) + '%)');
            } else if (num_exams == 1 && num_attendances > 0 && lab_grades > 0) {
                var total = exam_grades[0] * .5 + attendance_average * .05 + lab_average * .45;

                $('#total').text('Total Average: ' + total + ' (' + (total) + '%)');
                
            }
        }
    });
</script>

<body>
    <header>
        <h1>COSC 140 Grade Calculator</h1>
    </header>

        <h2>Leave any grade blank if not yet graded</h2>
    <div class="content">
        <form>
            <h2>Lab Grades</h2>
            <p>Lab 0 Grade:
            <input type="number" id="Lab0" min="0" max="100"/>
            </p>
            <p>Lab 1 Grade:
            <input type="number" id="Lab1" min="0" max="100"/>
            </p>
            <p>Lab 2 Grade:
            <input type="number" id="Lab2" min="0" max="100"/>
            </p>
            <p>Lab 3 Grade:
            <input type="number" id="Lab3" min="0" max="100"/>
            </p>
            <p>Lab 4 Grade:
            <input type="number" id="Lab4" min="0" max="100"/>
            </p>
            <p>Lab 5 Grade:
            <input type="number" id="Lab5" min="0" max="100"/>
            </p>
            <p>Lab 6 Grade:
            <input type="number" id="Lab6" min="0" max="100"/>
            </p>
            <p>Lab 7 Grade:
            <input type="number" id="Lab7" min="0" max="100"/>
            </p>
            <p>Lab 8 Grade:
            <input type="number" id="Lab8" min="0" max="100"/>
            </p>
        


            <h2>Attendance Grades</h2>
            <p>Week 1 (01/11)
            <input type="number" id="P1" min="0" max="5"/>
            </p>
            <p>Week 2 (01/18)
            <input type="number" id="P2" min="0" max="5"/>
            </p>
            <p>Week 3 (01/25)
            <input type="number" id="P3" min="0" max="5"/>
            </p>
            <p>Week 4 (02/01)
            <input type="number" id="P4" min="0" max="5"/>
            </p>
            <p>Week 5 (02/08)
            <input type="number" id="P5" min="0" max="5"/>
            </p>
            <p>Week 6 (02/15)
            <input type="number" id="P6" min="0" max="5"/>
            </p>
            <p>Week 7 (02/22)
            <input type="number" id="P7" min="0" max="5"/>
            </p>
            <p>Week 8 (03/01)
            <input type="number" id="P8" min="0" max="5"/>
            </p>
            <p>Week 9 (03/08)
            <input type="number" id="P9" min="0" max="5"/>
            </p>
            <p>Week 10 (03/22)
            <input type="number" id="P10" min="0" max="5"/>
            </p>
            <p>Week 11 (03/29)
            <input type="number" id="P11" min="0" max="5"/>
            </p>
            <p>Week 12 (04/05)
            <input type="number" id="P12" min="0" max="5"/>
            </p>
            <p>Week 13 (04/12)
            <input type="number" id="P13" min="0" max="5"/>
            </p>
            <p>Week 14 (04/19)
            <input type="number" id="P14" min="0" max="5"/>
            </p>
            <p>Week 15 (04/26)
            <input type="number" id="P15" min="0" max="5"/>
            </p>

            <h2>Exam Grades</h2>
            <p>Midterm
            <input type="number" id="midterm" min="0" max="100"/>
            </p>

            <div class="post">
            <p>Final
            <input type="number" id="final" min="0" max="100"/>
            </p>
            </div>
        </form>

        <hr/>
        <h3 id="lab">Lab Average</h2>
        <h3 id="attendance">Attendance Average</h2>
        <h3 id="exam">Test Average</h2>
        <h3 id="total">Total Average</h2>
    </div>
</body>

